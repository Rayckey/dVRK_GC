% Testing model
close all;
clear davinci;
clear Lol;
th = sym('th',[1,7]);
s = [  1.5708  0.0000 0.0 0.0000 -1.5708 -2.6179 2.6179 0  0.00  0.0000  0.0000  0.00    0.0001 0.0001 0.0001   1.0 0.0 0.0   0.0 1.0 0.0   0.0 0.0 1.0
    0.0000  0.2794 0.0 0.0000 -1.5708 -2.6179 2.6179 0  0.10 -0.1500  0.0000  0.00    0.0001 0.0001 0.0001   1.0 0.0 0.0   0.0 1.0 0.0   0.0 0.0 1.0
    -1.5708  0.3645 0.0 0.0000 1.5708 -2.6179 2.6197 0  0.03 -0.1500  0.0000  0.00    0.0001 0.0001 0.0001   1.0 0.0 0.0   0.0 1.0 0.0   0.0 0.0 1.0
    1.5708  0.0000 0.0 0.1506 0.0000 -2.6179 2.6179 0  0.05  0.0000 -0.1500 -0.15    0.0001 0.0001 0.0001   1.0 0.0 0.0   0.0 1.0 0.0   0.0 0.0 1.0
    -1.5708  0.0000 0.0 0.0000 0.0000 -2.6179 2.6179 0  0.00  0.0000  0.0300 -0.03    0.0001 0.0001 0.0001   1.0 0.0 0.0   0.0 1.0 0.0   0.0 0.0 1.0
    1.5708  0.0000 0.0 0.0000 -1.5708 -2.6179 2.6179 0  0.00  0.0000 -0.0200  0.02    0.0001 0.0001 0.0001   1.0 0.0 0.0   0.0 1.0 0.0   0.0 0.0 1.0
    0.0000  0.0000 0.0 0.0000 1.5708 -2.6179 2.6179 0  0.00  0.0000  0.0000  0.00    0.0001 0.0001 0.0001   1.0 0.0 0.0   0.0 1.0 0.0   0.0 0.0 1.0];

d = double(s(:,4));
d = [0.0;d];
d(end) = [];

ad = double(s(:,2));
ad = [0.0;ad];
ad(end) = [];
alpha = double(s(:,1));
alpha = [0.0; alpha];
alpha(end) = [];
offset = double(s(:,5));


startup_rvc
datadump = [zeros(6,1),d(1:6),ad(1:6),alpha(1:6)];
Lol(1) = Link(datadump(1,:),'modified')
Lol(2) = Link(datadump(2,:),'modified')
Lol(3) = Link(datadump(3,:),'modified')
Lol(4) = Link(datadump(4,:),'modified')
Lol(5) = Link(datadump(5,:),'modified')
Lol(6) = Link(datadump(6,:),'modified')

davinci = SerialLink(Lol, 'name', 'davinci');
qz = zeros(1,6);
davinci.offset = offset;

qz = zeros(1,6);
% qz = X(20,1:4)
davinci.plot(qz);


